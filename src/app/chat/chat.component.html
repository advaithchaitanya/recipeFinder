<div class="min-h-screen w-[90%] m-auto flex flex-col bg-gradient-to-br from-orange-100 via-yellow-50 to-orange-200 text-orange-900 overflow-hidden font-sans rounded-xl shadow-2xl border border-orange-300">

  <!-- üçõ Top: Chef Groups -->
  <div class="flex  items-center justify-center gap-4 py-4 bg-orange-200/60 backdrop-blur-sm shadow-sm border-b border-orange-300">
 <div class="flex items-center justify-center gap-4 py-4 bg-orange-200/60 backdrop-blur-sm shadow-sm border-b border-orange-300">
  <div *ngFor="let chef of chefGroups"
       (click)="selectGroup(chef)"
       class="flex flex-col items-center space-y-1 cursor-pointer hover:scale-105 transition-all duration-300">

    <!-- üîµ Circle with SVG Icon -->
    <div class="w-14 h-14 flex items-center justify-center rounded-full bg-orange-500 text-white shadow-md hover:bg-orange-600">
      <ng-container [ngSwitch]="chef">

        <!-- üë®‚Äçüç≥ Chef Alpha -->
        <svg *ngSwitchCase="'Chef Alpha'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="w-6 h-6 fill-white">
          <path d="M96 64c0-17.7 14.3-32 32-32h384c70.7 0 128 57.3 128 128s-57.3 128-128 128h-32c0 53-43 96-96 96h-192c-53 0-96-43-96-96V64zM480 224h32c35.3 0 64-28.7 64-64s-28.7-64-64-64h-32v128zM32 416h512c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/>
        </svg>

        <!-- üçú Chef Beta -->
        <svg *ngSwitchCase="'Chef Beta'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="w-6 h-6 fill-white">
          <path d="M86.4 5.5L61.8 47.6C58 54.1 56 61.6 56 69.2V72c0 22.1 17.9 40 40 40s40-17.9 40-40v-2.8c0-7.6-2-15-5.8-21.6L105.6 5.5C103.6 2.1 100 0 96 0s-7.6 2.1-9.6 5.5zM128 176c0-17.7-14.3-32-32-32s-32 14.3-32 32v48c-35.3 0-64 28.7-64 64v71c8.3 5.2 18.1 9 28.8 9 13.5 0 27.2-6.1 38.4-13.4 18.4-11.9 34.6-28.2 51.7-35.2 5.4-2.2 10.2-1.7 14.9-1.7 12.2 0 25.7 7.6 37.2 15.5 10.2 7.1 23 13.1 36.3 13.1s26.1-6 36.3-13.1c16.5-11.5 30.5-25.3 48.8-25.3s30.7 13.8 48.8 25.3c10.2 7.1 23 13.1 36.3 13.1 10.7 0 20.5-3.9 28.8-9v-71c0-35.3-28.7-64-64-64v-48c0-17.7-14.3-32-32-32s-32 14.3-32 32v48h-64v-48z"/>
        </svg>

        <!-- ü•¢ Chef Gamma -->
        <svg *ngSwitchCase="'Chef Gamma'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="w-6 h-6 fill-white">
          <path d="M240 144A96 96 0 1 0 48 144a96 96 0 1 0 192 0zm44.4 32C269.9 240.1 212.5 288 144 288C64.5 288 0 223.5 0 144S64.5 0 144 0c68.5 0 125.9 47.9 140.4 112h71.8c8.8-9.8 21.6-16 35.8-16h104c26.5 0 48 21.5 48 48s-21.5 48-48 48h-104c-14.2 0-27-6.2-35.8-16h-71.8z"/>
        </svg>

        <!-- üç£ Chef Delta -->
        <svg *ngSwitchCase="'Chef Delta'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-6 h-6 fill-white">
          <path d="M160 265.2c0 8.5-3.4 16.6-9.4 22.6l-26.8 26.8c-12.3 12.3-32.5 11.4-49.4 7.2C69.8 320.6 65 320 60 320c-33.1 0-60 26.9-60 60s26.9 60 60 60c6.3 0 12 5.7 12 12c0 33.1 26.9 60 60 60s60-26.9 60-60c0-5-.6-9.8-1.8-14.5c-4.2-16.9-5.2-37.1 7.2-49.4l26.8-26.8c6-6 14.1-9.4 22.6-9.4h89.2c6.3 0 12.4-.3 18.5-1c11.9-1.2 16.4-15.5 10.8-26c-8.5-15.8-13.3-33.8-13.3-53c0-61.9 50.1-112 112-112c8 0 15.7 .8 23.2 2.4c11.7 2.5 24.1-5.9 22-17.6C494.5 62.5 422.5 0 336 0C238.8 0 160 78.8 160 176v89.2z"/>
        </svg>

        <!-- üßë‚Äçüç≥ Chef Omega -->
        <svg *ngSwitchCase="'Chef Omega'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="w-6 h-6 fill-white">
          <path d="M432 240c53 0 96-43 96-96s-43-96-96-96c-35.5 0-66.6 19.3-83.2 48h-52.6c19.8-55.9 73.1-96 135.8-96c79.5 0 144 64.5 144 144s-64.5 144-144 144c-27.7 0-53.5-7.8-75.5-21.3l35.4-35.4c12.2 5.6 25.8 8.7 40.1 8.7zM1.8 142.8C5.5 133.8 14.3 128 24 128h368c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2L232 464h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H208c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V345.9L7 169c-6.9-6.9-8.9-17.2-5.2-26.2z"/>
        </svg>

      </ng-container>
    </div>

    <!-- üè∑Ô∏è Name Below -->
    <p class="text-xs font-semibold text-orange-900 text-center">{{ chef }}</p>
  </div>
</div>


  </div>

  <div class="flex flex-1 overflow-y-auto-scroll">

    <!-- üë• Sidebar: Users -->
    <div class="w-[22%] bg-orange-100/50 p-4 overflow-y-auto border-r border-orange-300 space-y-4 backdrop-blur-md chat">
      <div *ngFor="let user of users"
           (click)="selectUser(user)"
           class="flex items-center gap-3 p-2 rounded-lg hover:bg-orange-300/70 cursor-pointer transition duration-300 group">
        <img [src]="user.photoURL" alt="User" class="w-10 h-10 rounded-full border border-orange-400 shadow group-hover:scale-105 transition">
        <span class="font-semibold text-orange-900 truncate group-hover:underline">{{  user.name }}</span>
      </div>
    </div>

    <!-- üí¨ Main Chat Window -->
    <div class="flex-1 flex flex-col justify-between p-6 bg-orange-100/50 backdrop-blur-md overflow-hidden">

      <!-- üí¨ Chat Title -->
      <div class="text-2xl font-bold text-orange-700 mb-4">
        <ng-container *ngIf="selectedGroup; else privateChat">
          üçΩÔ∏è Group: {{ selectedGroup }}
        </ng-container>
        <ng-template #privateChat>
          <ng-container *ngIf="selectedUser">
            üí¨ Chat with {{ selectedUser.name }}
          </ng-container>
        </ng-template>
      </div>

      <!-- ‚úâÔ∏è Messages -->
      <div class="flex-1 overflow-y-auto space-y-4 pr-2 pb-4">
        <div *ngFor="let msg of messages"
             [ngClass]="msg.senderId === currentUser?.uid ? 'text-right' : 'text-left'">

          <div class="flex items-end gap-2 max-w-[75%]"
               [ngClass]="msg.senderId === currentUser?.uid ? 'ml-auto flex-row-reverse' : 'flex-row'">

            <!-- üë§ Avatar + Name -->
           <div class="flex flex-col items-center space-y-1">
  <ng-container *ngIf="msg.senderPhotoURL; else initials">
    <img [src]="msg.senderPhotoURL" class="w-8 h-8 rounded-full object-cover shadow" />
  </ng-container>

  <span *ngIf="getUserById(msg.senderId)?.name"
        class="text-[10px] text-orange-900/60 w-[50px] truncate text-center leading-none font-medium"
        [title]="getUserById(msg.senderId)?.nickname || getUserById(msg.senderId)?.name">
    {{ getUserById(msg.senderId)?.nickname || getUserById(msg.senderId)?.name }}
  </span>

  <ng-template #initials>
    <div class="w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white font-bold text-xs shadow">
      {{ getInitials(getUserById(msg.senderId)?.nickname || getUserById(msg.senderId)?.name || 'U') }}
    </div>
  </ng-template>
</div>


            <!-- üí¨ Message Bubble -->
            <div class="inline-block px-4 py-2 rounded-2xl text-sm shadow-sm"
                 [ngClass]="msg.senderId === currentUser?.uid ? 'bg-orange-500 text-white' : 'bg-white/90 text-orange-900 border border-orange-200'">
              {{ msg.text }}
            </div>
          </div>
        </div>
      </div>

      <!-- üß† Chat Input -->
      <form (ngSubmit)="sendMessage()" class="mt-6 flex items-center gap-3">
        <input
          [(ngModel)]="newMessage"
          name="message"
          type="text"
          placeholder="Type a message..."
          class="flex-1 bg-white/40 border border-orange-400 text-orange-900 px-4 py-3 rounded-full focus:outline-none focus:ring focus:ring-orange-400 placeholder:text-orange-400"
          required />
        <button
          type="submit"
          class="bg-orange-500 hover:bg-orange-600 text-white px-5 py-2 rounded-full font-semibold shadow-lg transition active:scale-95">
          ‚û§
        </button>
      </form>

    </div>
  </div>

  <!-- üë®‚Äçüç≥ Bottom: Chef Emojis -->
<!-- üë®‚Äçüç≥ Talk to Chefs Section -->
<div class="bg-orange-100/60 shadow-inner border-t border-orange-300 backdrop-blur-md pt-6 px-4">

  <!-- üßë‚Äçüç≥ Heading -->
  <h2 class="text-xl sm:text-2xl font-extrabold text-orange-700 text-center mb-4 tracking-wide">
    üë®‚Äçüç≥ Talk to Chefs
  </h2>

  <!-- ‚ú® Gradient Divider -->
  <div class="w-1/2 h-1 mx-auto bg-gradient-to-r from-orange-400 via-yellow-300 to-orange-400 rounded-full mb-6 shadow-md"></div>

  <!-- üë• Chef Avatars -->
  <div class="flex flex-wrap items-center justify-center gap-6 pb-6">
    <div *ngFor="let chef of chefUsers"
         (click)="selectUser(chef)"
         class="flex flex-col items-center space-y-1 cursor-pointer group w-20 transition-all duration-300 hover:scale-105">

      <!-- üñºÔ∏è Avatar -->
      <div class="w-14 h-14 rounded-full overflow-hidden border-2 border-orange-500 shadow-lg">
        <img [src]="chef.photoURL"
             [alt]="chef.nickname || chef.name"
             class="w-full h-full object-cover" />
      </div>

      <!-- üè∑Ô∏è Nickname -->
      <span class="text-sm text-orange-900 font-semibold text-center truncate w-full">
        {{ chef.nickname || chef.name }}
      </span>
    </div>
  </div>
</div>



</div>
