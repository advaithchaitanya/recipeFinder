<div 
  [ngClass]="service.active ? 'translate-x-[0%] z-[100]' : 'translate-x-full opacity-0'" 
  class="card fixed top-0 right-0 h-screen w-screen xl:w-[50%] md:w-[80%] overflow-y-auto transition-all duration-500 ease-in-out bg-gradient-to-tr from-red-500 via-orange-400 to-yellow-300 backdrop-blur-2xl shadow-2xl border border-white/20"
>

  <!-- Close Button -->
  <div class="sticky z-40 top-0">
    <button 
      (click)="service.toggle()" 
      class="bg-white text-red-600 hover:bg-white/90 p-2 rounded-full font-bold absolute right-4 top-4 z-50 shadow-md"
    >
      ✕
    </button>
  </div>

  <!-- Dish Content -->
  <div *ngIf="service.displayDish as data" class="flex flex-col space-y-8 pt-24 pb-10 px-6 text-red-900">

    <!-- Dish Header -->
    <div class="sticky top-0 bg-white backdrop-blur-md border-b border-orange-300 z-30 py-4 px-2 text-center rounded-lg shadow-md">
      <h1 class="text-3xl font-extrabold tracking-tight text-red-800 drop-shadow">
        🍽️ {{ data.strMeal }}
      </h1>
      <p class="text-sm text-orange-700 italic">{{ data.strCategory }} | {{ data.strArea }}</p>
    </div>

    <!-- Add to Favorites Button -->
    <button 
      (click)="addToFavorites()" 
      class="bg-yellow-400 w-[40%] ml-auto h-[50px] block rounded-xl font-bold text-red-900 shadow-lg hover:scale-105 hover:bg-yellow-500 transition duration-300">
      ⭐ Add to Favorites
    </button>

    <!-- Meal Image -->
<div class="border-4 border-red-300 rounded-xl overflow-hidden shadow-lg max-w-2xl mx-auto">
  <img 
    [src]="data.strMealThumb" 
    alt="Meal Image" 
    class="w-full h-auto max-h-[400px] object-cover rounded-xl hover:scale-105 transition duration-300 ease-in-out" 
  />
</div>
    <!-- Instructions Section -->
    <div class="bg-white/60 border border-orange-300 p-4 rounded-xl shadow-md">
      <h2 class="text-2xl font-semibold mb-2 text-red-700">📝 Instructions</h2>
      <p class="whitespace-pre-wrap leading-relaxed text-gray-800">{{ data.strInstructions }}</p>
    </div>

    <!-- Ingredients Section -->
    <div class="bg-white/60 border border-orange-300 p-4 rounded-xl shadow-md">
      <h2 class="text-2xl font-semibold mb-4 text-orange-800">🥄 Ingredients</h2>
      <ul class="list-disc list-inside space-y-1">
        <li *ngFor="let item of getIngredients(data)" class="text-gray-700">
          {{ item }}
        </li>
      </ul>
      <div *ngIf="getIngredients(data).length === 0" class="italic text-gray-500 mt-2">
        No ingredients listed.
      </div>
    </div>

    <!-- YouTube Video -->
    <div class="bg-white/60 border border-yellow-400 p-4 rounded-xl shadow-md">
      <h2 class="text-2xl font-semibold mb-2 text-yellow-700">🎥 Watch Recipe</h2>
      <ng-container *ngIf="safeYoutubeUrl; else noVideo">
        <iframe 
          class="w-full aspect-video rounded-lg shadow-md" 
          [src]="safeYoutubeUrl"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen>
        </iframe>
      </ng-container>
      <ng-template #noVideo>
        <p class="italic text-gray-600">No video available for this meal.</p>
      </ng-template>
    </div>

  </div>
</div>
